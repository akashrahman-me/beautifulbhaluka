package com.akash.beautifulbhaluka.presentation.screens.famouspeople.details

import androidx.lifecycle.ViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.update

class FamousPersonDetailsViewModel : ViewModel() {

    private val _uiState = MutableStateFlow(FamousPersonDetailsUiState())
    val uiState: StateFlow<FamousPersonDetailsUiState> = _uiState.asStateFlow()

    fun loadPersonDetails(title: String) {
        _uiState.update { it.copy(isLoading = true) }

        // Decode URL-encoded title
        val decodedTitle = try {
            java.net.URLDecoder.decode(title, "UTF-8")
        } catch (e: Exception) {
            title
        }.trim()

        val mockContent = when {
            decodedTitle.contains("ডক্টর শাহ মুহাম্মদ ফারুক") || decodedTitle.contains("শাহ মুহাম্মদ ফারুক") -> """
## ডক্টর শাহ মুহাম্মদ ফারুক

সাবেক ভাইস চ্যান্সেলর (ভিসি)  
বাংলাদেশ কৃষি বিশ্ববিদ্যালয়, ময়মনসিংহ

---

### জন্ম

উথুরা ফকির বাড়ি, ভালুকা, ময়মনসিংহ।

### পিতা

মরহুম এডভোকেট শাহ মোহাম্মদ ওয়াজেদ আলী মিয়া  
অ্যাডভোকেট, ময়মনসিংহ জর্জ কোর্ট

### পরিবারের অন্যান্য সদস্য

- ভাই: ডঃ শাহ মুহাম্মদ ফরিদ, সাবেক কেবিনেট সচিব, বাংলাদেশ সচিবালয়
- অস্ট্রিয়া প্রবাসী: মরহুম শাহ মোহাম্মদ ফরহাদ
- *(ভবিষ্যতে লিখবো ইনশাআল্লাহ)*

### স্ত্রী

অধ্যাপিকা রায়হানা ফারুক  
সাবেক যুগ্ম আহ্বায়ক, ময়মনসিংহ দক্ষিণ জেলা বিএনপি  
বর্তমান সদস্য, ময়মনসিংহ দক্ষিণ জেলা বিএনপি

---

## পেশাগত জীবন

তিনি ২৩.০৮.১৯৯৩ থেকে ১৩.১১.১৯৯৬ সাল পর্যন্ত বাকৃবির উপাচার্যের দায়িত্ব পালন করেন।

১৯৬৩ সালে বাংলাদেশ প্রকৌশল বিশ্ববিদ্যালয় (বুয়েট) হতে যান্ত্রিক প্রকৌশলে স্নাতক ডিগ্রি অর্জন করেন এবং একই বছর বাকৃবিতে কৃষি শক্তি ও যন্ত্র বিভাগে প্রভাষক হিসেবে যোগ দেন।

পরবর্তীতে যুক্তরাষ্ট্র থেকে পিএইচডি অর্জনের পর তিনি

- কৃষি শক্তি ও যন্ত্র বিভাগের বিভাগীয় প্রধান
- অনুষদের ডীন
- বিশ্ববিদ্যালয়ের উপাচার্য

হিসেবে দায়িত্ব পালন করেন।

---

## রাজনৈতিক জীবন

ডক্টর শাহ মোহাম্মদ ফারুক ২০০১ সালে ধানের শীষ প্রতীকে ময়মনসিংহ–১১ (ভালুকা) আসন থেকে নির্বাচন করেন।

ভালুকার জনগণ তাকে অত্যন্ত সম্মান ও শ্রদ্ধার সঙ্গে বিপুল ভোটে সমর্থন দিলেও রাজনৈতিক কুটচালের কারণে তাকে পরাজয় স্বীকার করতে হয়, যেখানে বিএনপি'র শীর্ষস্থানীয় নেতৃবৃন্দও অংশগ্রহণ করেছিলেন।

তিনি চাইলে প্রশাসনিক প্রভাব ব্যবহার করে এমপি হতে পারতেন। প্রশাসন থেকে হ্যাঁ সূচক সম্মতি চাওয়া হলে তিনি বলেন

**"আমি অবৈধভাবে সংসদ সদস্য হতে চাই না, জনগণের সিদ্ধান্ত আমি সাদরে গ্রহণ করেছি।"**

এটি ভালুকার সচেতন মহলে সুপরিচিত একটি ইতিহাস।

---

## মৃত্যু

তিনি ২০২১ সালে ইন্তেকাল করেন।

**আল্লাহ এই কীর্তিমান ব্যক্তিকে জান্নাত নসিব করুন।**
"""

            decodedTitle.contains("কেবিএম আছমত আলী সরকার") -> """
## কেবিএম আছমত আলী সরকার

### সংক্ষিপ্ত পরিচিতি

কেবিএম আছমত আলী সরকার ভালুকার একজন বিশিষ্ট ব্যক্তিত্ব এবং সমাজসেবক।

### অবদান

তিনি স্থানীয় উন্নয়ন ও সামাজিক কল্যাণমূলক কাজে গুরুত্বপূর্ণ ভূমিকা পালন করেছেন।

---

**বিস্তারিত তথ্য শীঘ্রই যুক্ত করা হবে।**
"""

            else -> """
# $decodedTitle

## সংক্ষিপ্ত বিবরণ

এই ব্যক্তিত্ব সম্পর্কে বিস্তারিত তথ্য সংগ্রহ করা হচ্ছে।

---

**বিস্তারিত তথ্য শীঘ্রই যুক্ত করা হবে। ধন্যবাদ।**
"""
        }

        _uiState.update {
            it.copy(
                isLoading = false,
                personTitle = decodedTitle,
                personContent = mockContent
            )
        }
    }
}

