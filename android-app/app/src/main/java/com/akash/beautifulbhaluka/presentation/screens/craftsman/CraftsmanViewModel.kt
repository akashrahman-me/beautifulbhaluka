package com.akash.beautifulbhaluka.presentation.screens.craftsman

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.update
import kotlinx.coroutines.launch

class CraftsmanViewModel : ViewModel() {

    private val _uiState = MutableStateFlow(CraftsmanUiState())
    val uiState: StateFlow<CraftsmanUiState> = _uiState.asStateFlow()

    init {
        onAction(CraftsmanAction.LoadData)
    }

    fun onAction(action: CraftsmanAction) {
        when (action) {
            is CraftsmanAction.LoadData -> loadData()
            is CraftsmanAction.SearchQueryChanged -> updateSearchQuery(action.query)
            is CraftsmanAction.TypeFilterChanged -> updateTypeFilter(action.type)
            is CraftsmanAction.SearchExpandedChanged -> updateSearchExpanded(action.expanded)
            is CraftsmanAction.CallNumber -> {
                // Handle phone call action - can be implemented later
            }
        }
    }

    private fun loadData() {
        viewModelScope.launch {
            _uiState.update { it.copy(isLoading = true) }

            try {
                val craftsmen = listOf(
                    Craftsman(
                        "মোঃ আরিফ মোল্লা",
                        "01308488451",
                        "রাজমিস্ত্রী",
                        "১ নং ওয়ার্ড, মোল্লা পাড়া, ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman("রুবেল হুসাইন", "01631504844", "রং মিস্ত্রি", "ভালুকা"),
                    Craftsman(
                        "হামিদ মিয়া",
                        "01626869920",
                        "ইলেকট্রিক মিস্ত্রি",
                        "Seedstore Bhaluka ..."
                    ),
                    Craftsman(
                        "মোঃমনিরুজ্জামান",
                        "01680880975",
                        "ইলেকট্রিক মিস্ত্রি",
                        "মেহেরাবারী সিডস্টোর বাজার"
                    ),
                    Craftsman(
                        "মো:রেদুয়ান শেখ",
                        "01639741201",
                        "ইলেকট্রিক মিস্ত্রি",
                        "পূর্ব ভালুকা"
                    ),
                    Craftsman("Shamaul Alam", "01957503751", "রাজমিস্ত্রী", "হাজির বাজার, ভালুকা।"),
                    Craftsman(
                        "মোঃ: বিল্লাল হোসেন",
                        "01720819105",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "বাটাজোর, ভালুকা"
                    ),
                    Craftsman(
                        "নিজাম উদ্দিন",
                        "01728516692",
                        "স্যানিটারি মিস্ত্রি",
                        "সিডষ্টোর বাজার"
                    ),
                    Craftsman("মোঃ সহিদুল ইসলাম", "০১৭৪১৩২৫১৯১", "কাঠমিস্ত্রী", "উথুরা, ভালুকা।"),
                    Craftsman(
                        "মোঃ সোহেল রানা",
                        "০১৭২০২৩০৯৫৬",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "ভালুকা।"
                    ),
                    Craftsman("ASHRAFUL ISLAM JOY", "01742219898", "ইলেকট্রিক মিস্ত্রি", "ভালুকা"),
                    Craftsman(
                        "মো:বিপ্লব হোসাইন",
                        "01305748339",
                        "রাজমিস্ত্রী",
                        "৩ নং ভরাডোবা ইউনিয়ন"
                    ),
                    Craftsman("M.Rana", "01832178333", "কম্পিউটার মিস্ত্রি", "Square Masterbari"),
                    Craftsman("কাজল মিয়া", "01879114272", "টাইলস মিস্ত্রি", "বাশিল, ভালুকা।"),
                    Craftsman(
                        "মোঃ ফরহাদ হুসাইন ফাহাদ",
                        "01323666030",
                        "ইলেকট্রিক মিস্ত্রি",
                        "সিডস্টোর, ভালুকা।"
                    ),
                    Craftsman(
                        "মোঃ পারভেজ মিয়া",
                        "01729793602",
                        "ইলেকট্রিক মিস্ত্রি",
                        "ধামশুর, ভালুকা।"
                    ),
                    Craftsman(
                        "মোঃ ফরহাদ হোসেন",
                        "+8801986084400",
                        "ইলেকট্রিক মিস্ত্রি",
                        "খোলাবাড়ী, উথুরা,ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোঃরায়হান শরিফ",
                        "+8801641821083 / +8801736076009",
                        "থাই গ্লাস মিস্ত্রি",
                        "লবণকোঠা,হবিরবাড়ী,ভালুকা,ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "Palash Sarkar",
                        "01703-413302",
                        "ইলেকট্রিক মিস্ত্রি",
                        "Dhamshur,Mollikbari,Bhaluka"
                    ),
                    Craftsman(
                        "মাধব বাবু",
                        "01724400594",
                        "কাঠমিস্ত্রী",
                        "বর্তা, ভালুকা, ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "মোঃ সবুজ মিয়া",
                        "01637832076",
                        "স্যানিটারি মিস্ত্রি",
                        "পাঁচ রাস্তার মোড়, ভালুকা, ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "রুবেল মিয়া",
                        "01722081814",
                        "রাজমিস্ত্রী",
                        "৭ নং ওয়ার্ড , গজারি খাল রোড,ভালুকা পৌরসভা"
                    ),
                    Craftsman(
                        "আশিকুল ইসলাম আশিক",
                        "01962169279",
                        "ইলেকট্রিক মিস্ত্রি",
                        "2 নং ওয়ার্ড ভালকা পৌরসভা"
                    ),
                    Craftsman(
                        "আশিকুল ইসলাম আশিক",
                        "01962169279",
                        "রং মিস্ত্রি",
                        "2 নং ওয়ার্ড ভালকা পৌরসভা"
                    ),
                    Craftsman("MD Faruk", "01622805237", "রং মিস্ত্রি", "kathali, Bhaluka"),
                    Craftsman("ঘোড়া শহীদ", "+880 1927-310722", "রং মিস্ত্রি", "খাওরাইল, ভালুকা"),
                    Craftsman(
                        "Sk Sabbier Khan. It Technician",
                        "01984562132",
                        "সিসি ক্যামেরা মিস্ত্রি",
                        "Seadstore bazar shamla taher plaza 2nd Floor Shop no 2 Shop name #-Tech Cc Camera sale & service"
                    ),
                    Craftsman(
                        "মো:জুলহাস উদ্দিন",
                        "01748098782",
                        "রাজমিস্ত্রী",
                        "ভাওয়ার মোড় ভালুকা"
                    ),
                    Craftsman(
                        "কাউসার আহমেদ",
                        "০১৫১১১৩৩৫৫১",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "বাটাজোর রোড,সিডষ্টোর বাজার"
                    ),
                    Craftsman(
                        "মেহেদী হাসান",
                        "01600246919",
                        "রাজমিস্ত্রী",
                        "জেলাঃ ময়মনসিংহ থানাঃ ভালুকা ইউনিয়নঃ ডাকাতিয়া গ্রামঃ চানপুর ওয়ার্ড নংঃ ৯"
                    ),
                    Craftsman(
                        "মোঃ আতিকুল ইসলাম",
                        "01727432287",
                        "স্যানিটারি মিস্ত্রি",
                        "ভালুকা পাঁচ রাস্তার মোড়।"
                    ),
                    Craftsman(
                        "ফরহাদ ইলেকট্রিক ইঞ্জিনিয়ারিং ওয়ার্কশপ",
                        "01323-666030",
                        "ইলেকট্রিক মিস্ত্রি",
                        "সীডষ্টোর বাজার, ভালুকা, ময়মনসিংহ। এখানে সকল প্রকার ইলেকট্রিক মটর, জেনারেটর,ফ্যান ও সাবমারসিবল মটর সহ যাবতীয় ইলেকট্রিক কাজ করা হয়"
                    ),
                    Craftsman("জালাল উদ্দীন", "01743150393", "রাজমিস্ত্রী", "পাড়াগাও, ভালুকা।"),
                    Craftsman(
                        "মোঃ সজীব",
                        "01403508999",
                        "টাইলস মিস্ত্রি",
                        "স্কয়ার মাস্টারবাড়ি, ভালুকা।"
                    ),
                    Craftsman(
                        "শাহরিয়ার সজিব",
                        "০১৩৩৪৮৫৪৪০১",
                        "ইলেকট্রিক মিস্ত্রি",
                        "১১ নং রাজৈ ইউনিয়ন ,চান্দাব নতুন বাজার ,"
                    ),
                    Craftsman(
                        "শাকিব",
                        "01756260991",
                        "সিসি ক্যামেরা মিস্ত্রি, কম্পিউটার মিস্ত্রি",
                        "Bhaluka Mymensingh"
                    ),
                    Craftsman(
                        "মোঃ সাইদুল ইসলাম",
                        "০১৭৩৩৭৫০৫৫৩",
                        "স্যানিটারি মিস্ত্রি",
                        "পাড়াগাও, ভালুকা।"
                    ),
                    Craftsman("তাওহীদ পারভেজ", "০১৩১৮২৪৮৮৬৬", "ইলেকট্রিক মিস্ত্রি", "ভালুকা"),
                    Craftsman(
                        "মোঃ ফারুকুল ইসলাম",
                        "01311237183",
                        "থাই গ্লাস মিস্ত্রি",
                        "পাড়াগাও, হবিরবাড়ি, ভালুকা।"
                    ),
                    Craftsman(
                        "MD FARUKUL ISLAM",
                        "0704581972",
                        "ইন্টেরিয়র ডিজাইন",
                        "পাড়াগাও ,হাবিজাবি,ভালুকা।"
                    ),
                    Craftsman("Mustofa Kamal", "01790805040", "ইলেকট্রিক মিস্ত্রি", "Baluka"),
                    Craftsman(
                        "শাহ্‌জাহান ইলেকট্রিক হাউজ",
                        "01911-761297",
                        "ইলেকট্রিক মিস্ত্রি",
                        "উপজেলা পরিষদ এর বিপরীত পার্শ্বে, ৬ নং ওয়ার্ড, ভালুকা পৌরসভা।"
                    ),
                    Craftsman(
                        "Mustofa Kamal Nayem",
                        "01790505040",
                        "কাঠমিস্ত্রী",
                        "Mollikbari. Bhaluka."
                    ),
                    Craftsman("শাকিব", "০১৭৫৬২৬০৯৯১", "সিসি ক্যামেরা মিস্ত্রি", "ভালুকা"),
                    Craftsman(
                        "ফালু মিয়া",
                        "01770650136",
                        "কাঠমিস্ত্রী",
                        "মল্লিক বাড়ী, ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman("রাসেল", "০১৭৮৯০৪৪১৯৩", "ইলেকট্রিক মিস্ত্রি", "মল্লিকবাড়ী, ভালুকা"),
                    Craftsman(
                        "জাহিদুল ইসলাম নাছির",
                        "০১৬০৯৩৩৯৩৬০",
                        "ইলেকট্রিক মিস্ত্রি",
                        "ভালুকা, মটর মিস্ত্রি"
                    ),
                    Craftsman(
                        "দেলোয়ার",
                        "০১৭২১১২২৪৪৭",
                        "রাজমিস্ত্রী, রং মিস্ত্রি",
                        "সোনাখালী, ভালুকা। ঠিকাদার"
                    ),
                    Craftsman(
                        "Md aftab Ahmed",
                        "01914456006",
                        "থাই গ্লাস মিস্ত্রি",
                        "seed stor bazar"
                    ),
                    Craftsman("খাদেমুল ইসলাম বাবুল", "০১৬৮০৩৪৭৪৫৩", "ইলেকট্রিক মিস্ত্রি", "ভালুকা"),
                    Craftsman(
                        "মোঃ সাব্বির হোসেন LED TV টেকনিশিয়ান",
                        "01720382210",
                        "টিভি মিস্ত্রি",
                        "সিডষ্টোর বাজার, ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোঃ শাকিল",
                        "০১৭৫৪৯০৯৩৯৪",
                        "থাই গ্লাস মিস্ত্রি",
                        "সিডস্টোর, ভালুকা।"
                    ),
                    Craftsman(
                        "মোঃ ইদ্রিস আলী",
                        "01720006155",
                        "রাজমিস্ত্রী",
                        "১নং ওয়ার্ড,কোট ভবনের পিছনে ভালুকা পৌরসভা,ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোঃ মোকছেদুল মন্ডল",
                        "০১৯৭৫১৩৫৪৬১",
                        "কাঠমিস্ত্রী",
                        "ভালুকা সরকারি হাসপাতাল রোড,ভালুকা পৌরসভা।"
                    ),
                    Craftsman(
                        "মো: আনচারুল হক",
                        "01923836959",
                        "ইলেক্ট্রিশিয়ান",
                        "ভালুকা, হবির বাড়ি, বেলাসিয়া পাড়া ৯ নং ওয়াড"
                    ),
                    Craftsman(
                        "Forhad",
                        "01857105059",
                        "রং মিস্ত্রি",
                        "সীডস্টোর, ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman("অপু", "01960152465", "টাইলস মিস্ত্রি", "মল্লিকবাড়ী, ভালুকা।"),
                    Craftsman(
                        "মোঃ সাইফুল ইসলাম",
                        "01763067232, 01723477019",
                        "কাঠমিস্ত্রী",
                        "নারাঙ্গী চৌরাস্তা, ১নং উথুরা ইউনিয়ন, ভালুকা, ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "Md.Momin Mia",
                        "01867386600",
                        "এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, সিসি ক্যামেরা মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "Mymensingh Valuka"
                    ),
                    Craftsman(
                        "মোঃ হারুন অর রশিদ (হারুন)",
                        "01749941114",
                        "কাঠমিস্ত্রী",
                        "নারাঙ্গী চৌরাস্তা, ১নং উথুরা ইউনিয়ন, ভালুকা, ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "আশরাফুল ইসলাম",
                        "01738296179",
                        "থাই গ্লাস মিস্ত্রি, ইন্টেরিয়র ডিজাইন",
                        "শেখ সুপার মার্কেট,ভালুকা মল্লিকবাড়ী রোড,ভালুকা, ময়মনসিংহ।"
                    ),
                    Craftsman(
                        "খাইরুল ইসলাম",
                        "01954079601",
                        "কাঠমিস্ত্রী",
                        "পাড়াগাঁও,সীডষ্টোর বাজার,ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মো: আমিনুল ইসলাম",
                        "০১৭৪৭৭৩৩১৭২",
                        "ইলেকট্রিক মিস্ত্রি",
                        "ভালুকা বাজার সরকার অনুমোদিত লাইসেন্স প্রাপ্ত ইলেকট্রিশিয়ান ক্যাটাগরি বি, সি,"
                    ),
                    Craftsman(
                        "Md Sharif Hossain",
                        "01775479654",
                        "ইলেকট্রিক মিস্ত্রি, এসি মিস্ত্রি",
                        "Bharaduba, Bhaluka, Mymensingh"
                    ),
                    Craftsman(
                        "মো: রিপন মিয়া",
                        "০১৯১১১৪২১৩৭",
                        "ইলেকট্রিক মিস্ত্রি, গ্যাস মিস্ত্রি, স্যানিটারি মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "চান্দেরবাজার, স্কয়ার মাস্টারবাড়ী,ভালুকা,ময়মনসিংহ"
                    ),
                    Craftsman(
                        "MD AKASH MAHMUD",
                        "01774914714",
                        "সিসি ক্যামেরা মিস্ত্রি",
                        "ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman("মোহাম্মদ আলী", "01752424539", "কাঠমিস্ত্রী", "মেদুয়ারী, ভালুকা"),
                    Craftsman(
                        "জামান মিয়া(মোটরসাইকেল মিস্ত্রি)",
                        "01799976414",
                        "গাড়ির মিস্ত্রি",
                        "ধামশুর, মল্লিকবাড়ী,ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman("মোঃ রাজিব আহসান", "01711147409", "রাজমিস্ত্রী", "Bhaluka Upazila,"),
                    Craftsman("সুজন রং", "+880 1911-069760", "রং মিস্ত্রি", "ভালুকা"),
                    Craftsman("রবিন", "01933995314", "ইলেকট্রিক মিস্ত্রি", "উথুরা"),
                    Craftsman("মোঃ ইসহাক মিয়া", "01726227151", "রাজমিস্ত্রী", "ধামশুর,ভালুকা"),
                    Craftsman(
                        "আশরাফুল আহমেদ",
                        "০১৬১৫৮৩৪৭৫৫",
                        "স্যানিটারি মিস্ত্রি",
                        "চানপুর, আংগারগাড়া,ভালুকা"
                    ),
                    Craftsman(
                        "SK,KABIR HOSSAIN",
                        "01892161842",
                        "ইলেকট্রিক মিস্ত্রি",
                        "১নং উথুরা ইউনিয়ন ভালুকা"
                    ),
                    Craftsman(
                        "সাব্বির",
                        "01620978979",
                        "সিসি ক্যামেরা মিস্ত্রি",
                        "ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman("রফিকুল ইসলাম", "01629182200", "রাজমিস্ত্রী", "ভালুকা মোচার ভিটা"),
                    Craftsman(
                        "কামরুল হাসান",
                        "01626105775",
                        "রং মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "কাঁঠালী, ভালুকা।"
                    ),
                    Craftsman(
                        "আনছারুল ইসলাম(কনটেকটার)",
                        "০১৭১৪৯১১৫৪৫",
                        "রাজমিস্ত্রী",
                        "ভালুকা থানার মোড়"
                    ),
                    Craftsman(
                        "কামাল উদ্দিন",
                        "০১৭৩৯৭৬৫০৭৯",
                        "রাজমিস্ত্রী, রং মিস্ত্রি",
                        "C92M+6W5, Bhaluka, Bangladesh"
                    ),
                    Craftsman(
                        "Nor islam",
                        "01727911107",
                        "স্যানিটারি মিস্ত্রি",
                        "সরকার সেনেটারী পাঁচ রাস্তার মোড় রায় মার্কেট ভালুকা"
                    ),
                    Craftsman(
                        "সজীব মিয়া",
                        "01701869638",
                        "স্যানিটারি মিস্ত্রি",
                        "সরকার সেনেটারী রায় মার্কেট ভালুকা"
                    ),
                    Craftsman(
                        "Ali akbor",
                        "01932744260",
                        "সিসি ক্যামেরা মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "Uthura bazar,Bhaluka,Mymensingh"
                    ),
                    Craftsman(
                        "সোহাগ টিউব ওয়েল মিস্ত্রি",
                        "01748657480",
                        "স্যানিটারি মিস্ত্রি",
                        "পাঁচ রাস্তার মোড় রায় মার্কেট সরকার"
                    ),
                    Craftsman("মোঃ শাকিল", "০১৭১২০৬৩৪২১", "এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি", "ভালুকা"),
                    Craftsman("শাহাদাত", "০১৭৭৯৬৪২৮২৭", "থাই গ্লাস মিস্ত্রি", "গ্যাস অফিস, ভালুকা"),
                    Craftsman(
                        "মোঃ রকিব মিয়া",
                        "01794109324",
                        "ইলেকট্রিক মিস্ত্রি",
                        "পানিভান্ডা জয়নাতলী বাজার, ভালুকা"
                    ),
                    Craftsman(
                        "আল-আমিন সরকার",
                        "01714-465444",
                        "ইলেকট্রিক মিস্ত্রি",
                        "পানিভান্ডা জয়নাতলী বাজার"
                    ),
                    Craftsman("Eshaq mia", "01616227151", "রাজমিস্ত্রী", "ভালুকা"),
                    Craftsman("আরব আলী", "01712818338", "ইন্টেরিয়র ডিজাইন", "পূর্ব ভালুকা।"),
                    Craftsman(
                        "আমিন প্লাম্বার",
                        "0714654618",
                        "ইলেক্ট্রিশিয়ান",
                        "মল্লিকবাড়ী, ভালুকা"
                    ),
                    Craftsman(
                        "MD AREFUL ISLAM RANA",
                        "01627584081",
                        "ইলেকট্রিক মিস্ত্রি",
                        "ঝালপাঁজা হবিরবাড়ি"
                    ),
                    Craftsman(
                        "মোঃ:শরিফুল ইসলাম",
                        "01758471709",
                        "রাজমিস্ত্রী",
                        "নয়ন পুর মল্লিক বাড়ি ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "আব্দুল্লাহ আল মামুন",
                        "01733887030",
                        "গাড়ির মিস্ত্রি",
                        "আজিম অটো ইঞ্জিনিয়ারিং ওয়ার্কশপ,ভালুকা নতুন বাস স্ট্যান্ড,পাতাল মার্কেট সংলগ্ন,বাইক সার্ভিসিং সেন্টার."
                    ),
                    Craftsman(
                        "মোঃ মিজান আলী",
                        "01710641841",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "Square Masterbari"
                    ),
                    Craftsman(
                        "মোঃ জুয়েল মল্লিক",
                        "01613523981",
                        "রং মিস্ত্রি",
                        "উঃ রাংচাপড়া ফায়ার সার্ভিস সংলগ্ন ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোঃ মোস্তফা কামাল,(মোস্তফা ফার্নিচার মার্ট)",
                        "01712473167",
                        "কাঠমিস্ত্রী",
                        "ফায়ার সার্ভিস সংলগ্ন,ভালুকা পৌরসভা,ভালুকা ময়মনসিংহ,, এখানে উন্নত মানের মেশিন ও সু-দক্ষ কারিগর দ্বারা সকল প্রকার ফার্নিচার তৈরি ও বিক্রি করা হয়,"
                    ),
                    Craftsman(
                        "মোঃ ইসমাইল হোসাইন",
                        "01735648990",
                        "সুইং মেকানিক",
                        "জামিরদিয়া মাস্টার বাড়ি ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মো: মোশারফ হোসেন",
                        "০১৭৩১৬১২৩৫৩",
                        "কাঠমিস্ত্রী",
                        "ভালুকা ইউনিয়ন, ৩নং ওয়ার্ড।"
                    ),
                    Craftsman(
                        "পেইন্টার সোহাগ",
                        "০১৬০৫১৩১৯৩৯",
                        "রং মিস্ত্রি",
                        "ভাওয়ালিবাজু, ভালুকা।"
                    ),
                    Craftsman(
                        "মোঃ মনির হোসেন",
                        "01738598121",
                        "কাঠমিস্ত্রী",
                        "উথুরা বাজার, ভালুকা ময়মনসিংহ, গড় বাড়ি কাজ করে থাকি যে কোন ডিজাইন এর কাজ করি,"
                    ),
                    Craftsman(
                        "মোঃ ছাইফুল ইসলাম",
                        "01743777064",
                        "কাঠমিস্ত্রী",
                        "উথুরা বাজার ভালুকা ময়মনসিংহ , গড় বাড়ির কাজ করে থাকি"
                    ),
                    Craftsman(
                        "মোঃ রতন মিয়া",
                        "01789037678",
                        "কাঠমিস্ত্রী",
                        "উথুরা বাজার ভালুকা ময়মনসিংহ, যে কোন ফার্নিচার এবং নস্কর মিস্ত্রি যে কোন মডেলের নস্কর কাজ করে থাকি।"
                    ),
                    Craftsman("আব্দুল জলিল", "01746685404", "রং মিস্ত্রি", "বীরুনিয়া, ভালুকা"),
                    Craftsman(
                        "মোঃ শাওন আহমেদ",
                        "০১৩১২৯৯১৩৫৩",
                        "ইলেকট্রিক মিস্ত্রি",
                        "ধলিয়া ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "হাসান কন্সট্রাকসন",
                        "+8801779089909",
                        "রাজমিস্ত্রী",
                        "বান্দিয়া, মেদুয়ারি, ভালুকা"
                    ),
                    Craftsman(
                        "মো : আজাহার মিয়া",
                        "01772877367",
                        "রাজমিস্ত্রী",
                        "৭ নং মল্লিক বাড়ি ইউনিয়ন। গ্রাম ধামশুর ভালুকা ময়মসিংহ"
                    ),
                    Craftsman(
                        "মোঃ ছাইফুল ইসলাম",
                        "01772888230",
                        "কাঠমিস্ত্রী",
                        "উথুরা বাজার ভালুকা ময়মনসিংহ , পেলেন মেস্ত্রি"
                    ),
                    Craftsman(
                        "মোঃ ফরহাদ- ফ্যান,মটরের কয়েল বাঁধাই",
                        "01323-666030",
                        "ইলেকট্রিক মিস্ত্রি",
                        "সীডষ্টোর বাজার, ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোহাম্মদ ইব্রাহিম মিয়া",
                        "01731749333",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "৩ নং ভরাডোবা ইউনিয়ন ভালুকা,ময়মনসিংহ"
                    ),
                    Craftsman(
                        "বিপুল ইলেকট্রনিক্স",
                        "01914981971, 01717317676",
                        "ইলেকট্রিক মিস্ত্রি, টিভি মিস্ত্রি",
                        "ভালুকা মধ্য বাজার, ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman("MD sojon", "01911069760", "রং মিস্ত্রি", "Bhaluka, Bangladesh"),
                    Craftsman(
                        "মো:আসাদুল ইসলাম",
                        "০১৭৮৫৮৪৯৮৩৫-০১৮৪৩১৯২১৭৫",
                        "রাজমিস্ত্রী",
                        "থানা:ভালুকা / ইউনিয়ন:কাচিনা /গ্রাম:পাঁলগাও"
                    ),
                    Craftsman(
                        "মোঃ জসীম উদ্দিন",
                        "01771142581",
                        "ইলেকট্রিক মিস্ত্রি, এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "মেদুয়ারী, ভালুকা, ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মো:আল আমিন শেখ",
                        "01614749455",
                        "কাঠমিস্ত্রী",
                        "এখানে সকল প্রকার ফানিচার অর্ডার নেওয়া হয়, এবং সকল প্রকার ডিজাইনের কাজ করা হয়, সিস্টোর বাজার ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "মোঃ টুটুল মিয়া (টুটুল ফার্নিচার মার্ট)",
                        "01630903600",
                        "কাঠমিস্ত্রী",
                        "ফায়ার সার্ভিস সংলগ্ন, ভালুকা পৌরসভা, ভালুকা ময়মনসিংহ,, এখানে উন্নত মানের মেশিন ও সু-দক্ষ কারিগর দ্বারা সকল প্রকার ফার্নিচার তৈরি ও বিক্রি করা হয়,"
                    ),
                    Craftsman(
                        "মো ফাহাদ মিয়া",
                        "০১৭২৮৩৮৭৩২৮",
                        "ইলেকট্রিক মিস্ত্রি, এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, স্যানিটারি মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "ইউনিয়ন :উথুরা গ্রাম :মেনজেনা এখানে দক্ষ সহ সকল প্রকারের কাজ করা হয়"
                    ),
                    Craftsman(
                        "মোজাহিদুল হাসান নাছির",
                        "০১৬০৯৩৩৯৩৬০",
                        "ইলেকট্রিক মিস্ত্রি, এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, সিসি ক্যামেরা মিস্ত্রি",
                        "এখানে সকল প্রকার ইলেকট্রিক মটর, জেনারেটর,ফ্যান ও সাবমারসিবল মটর সহ যাবতীয় ইলেকট্রিক কাজ করা হয় সরকারি হাসপাতাল রোড ভালুকা"
                    ),
                    Craftsman(
                        "Masum raj",
                        "01933992659",
                        "ইলেকট্রিক মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "রাজৈ ভালুকা"
                    ),
                    Craftsman(
                        "মোহাম্মদ ইমরান হোসেন",
                        "০১৯৮১৩৪১৪০৭",
                        "ফ্রিজ মিস্ত্রি",
                        "বাজার রোড,সাভার,ঢাকা"
                    ),
                    Craftsman(
                        "Md : Hanif hasan",
                        "01939706463",
                        "ইলেক্ট্রিশিয়ান",
                        "সিডস্টোর বাজার... সেনেটারি মিস্তিরি + ইলেকট্রেশিয়ান.."
                    ),
                    Craftsman(
                        "মো: মাহাবুব হাসান",
                        "01939706463",
                        "ইলেকট্রিক মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "সিডস্টোর বাজার.."
                    ),
                    Craftsman(
                        "মোঃ হাফিজ উদ্দিন",
                        "01736991899",
                        "রাজমিস্ত্রী",
                        "কাঠালী ০৯ নং ওয়ার্ড ভালুকা পৌরসভা।"
                    ),
                    Craftsman(
                        "মোঃ হাবিব",
                        "01736991899",
                        "রাজমিস্ত্রী",
                        "কাঠালী ০৯ নং ওয়ার্ড ভালুকা পৌরসভা। রড+রাজমিস্ত্রী এক্সপার্ট এবং কনট্রাকটর"
                    ),
                    Craftsman(
                        "Mim Refrigeration",
                        "01729302811",
                        "এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, সিসি ক্যামেরা মিস্ত্রি, কম্পিউটার মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "Square Masterbari, Bhaluka, Mymensingh"
                    ),
                    Craftsman(
                        "মো: সবুজ মিয়া",
                        "01736555373",
                        "এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "সিড ইস্টোর ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "পাওয়ার রেফ্রিজারেশন এন্ড সার্ভিসিং সেন্টার",
                        "01684914234",
                        "এসি মিস্ত্রি, ফ্রিজ মিস্ত্রি, সিসি ক্যামেরা মিস্ত্রি, ইলেক্ট্রিশিয়ান",
                        "সীষ্ঠোর বাজার ভালুকা ময়মনসিংহ"
                    ),
                    Craftsman(
                        "শাহজাহান কন্টাকদার",
                        "01766414590",
                        "রাজমিস্ত্রী",
                        "ভরাডোবা পুরাতন বাসটেন্ড,ভালুকা"
                    ),
                    Craftsman(
                        "মোঃ ফরহাদ মিয়া",
                        "01784288713",
                        "ইলেকট্রিক মিস্ত্রি",
                        "পাচগাও হাজির বাজার. ভালুকা"
                    ),
                    Craftsman(
                        "মোঃ সোহেল মিয়া",
                        "01916731896",
                        "ইলেকট্রিক মিস্ত্রি, ফ্রিজ মিস্ত্রি, স্যানিটারি মিস্ত্রি",
                        "আনসার রোড,মাওনা,শ্রীপুর,গাজিপুর"
                    ),
                    Craftsman(
                        "উজ্জ্বল আহমেদ",
                        "+8801314501429",
                        "রং মিস্ত্রি",
                        "ভালুকায় যে কোনো যায়গা থেকে যোগাযোগ করুন"
                    ),
                    Craftsman(
                        "মোঃ হেদায়েত উল্লাহ",
                        "01613337214",
                        "ইলেক্ট্রিশিয়ান",
                        "Mc Bazar, 1740, Bangladesh"
                    )
                )

                _uiState.update {
                    it.copy(
                        isLoading = false,
                        craftsmen = craftsmen,
                        filteredCraftsmen = craftsmen
                    )
                }
            } catch (e: Exception) {
                _uiState.update {
                    it.copy(isLoading = false, error = e.message)
                }
            }
        }
    }

    private fun updateSearchQuery(query: String) {
        _uiState.update { it.copy(searchQuery = query) }
        filterData()
    }

    private fun updateTypeFilter(type: CraftsmanType) {
        _uiState.update { it.copy(selectedType = type) }
        filterData()
    }

    private fun updateSearchExpanded(expanded: Boolean) {
        _uiState.update { it.copy(isSearchExpanded = expanded) }
    }

    private fun filterData() {
        val currentState = _uiState.value
        val query = currentState.searchQuery.lowercase()
        val type = currentState.selectedType

        val filtered = currentState.craftsmen.filter { craftsman ->
            val matchesSearch = query.isEmpty() ||
                    craftsman.name.lowercase().contains(query) ||
                    craftsman.address.lowercase().contains(query) ||
                    craftsman.type.lowercase().contains(query)

            val matchesType = type == CraftsmanType.ALL ||
                    craftsman.type.contains(type.value, ignoreCase = true) ||
                    (type == CraftsmanType.OTHER && !isKnownType(craftsman.type))

            matchesSearch && matchesType
        }

        _uiState.update { it.copy(filteredCraftsmen = filtered) }
    }

    private fun isKnownType(type: String): Boolean {
        val knownTypes = listOf(
            "ইলেকট্রিক মিস্ত্রি", "রাজমিস্ত্রী", "কাঠমিস্ত্রী", "রং মিস্ত্রি",
            "স্যানিটারি মিস্ত্রি", "টাইলস মিস্ত্রি", "এসি মিস্ত্রি", "ফ্রিজ মিস্ত্রি",
            "সিসি ক্যামেরা মিস্ত্রি", "কম্পিউটার মিস্ত্রি", "থাই গ্লাস মিস্ত্রি",
            "ইন্টেরিয়র ডিজাইন", "টিভি মিস্ত্রি", "গাড়ির মিস্ত্রি"
        )
        return knownTypes.any { type.contains(it, ignoreCase = true) }
    }
}
