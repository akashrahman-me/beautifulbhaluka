package com.akash.beautifulbhaluka.presentation.screens.union

import androidx.lifecycle.ViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.update
import com.akash.beautifulbhaluka.domain.model.UnionInfo
import com.akash.beautifulbhaluka.domain.model.UnionData

class UnionViewModel : ViewModel() {

    private val _uiState = MutableStateFlow(UnionUiState())
    val uiState: StateFlow<UnionUiState> = _uiState.asStateFlow()

    init {
        loadUnionData()
    }

    fun onAction(action: UnionAction) {
        when (action) {
            is UnionAction.LoadData -> loadUnionData()
            is UnionAction.ToggleSection -> toggleSection(action.index)
        }
    }

    private fun loadUnionData() {
        _uiState.update { it.copy(isLoading = true) }

        // Static data as per requirement - will integrate with backend later
        val mockData = UnionInfo(
            title = "ভালুকা উপজেলার ইউনিয়ন সমূহের তথ্য",
            unions = getUnionData()
        )

        _uiState.update {
            it.copy(
                isLoading = false,
                unionInfo = mockData,
                error = null
            )
        }
    }

    private fun toggleSection(index: Int) {
        _uiState.update { state ->
            val expandedSections = state.expandedSections.toMutableSet()
            if (expandedSections.contains(index)) {
                expandedSections.remove(index)
            } else {
                expandedSections.add(index)
            }
            state.copy(expandedSections = expandedSections)
        }
    }

    private fun getUnionData(): List<UnionData> {
        return listOf(
            UnionData(
                title = "১নং উথুরা ইউনিয়ন",
                content = "ময়মনসিংহ ভালুকা উপজেলা ১নং উথুরা ইউনিয়ন। এই ইউনিয়নে প্রায় ২৯ হাজার জনগণ বসবাস করছে।\n\n- নাম – ১নং উথুরা।  \n- আয়তন – ৪৩.৩১ (বর্গ কিঃ মিঃ)  \n- লোকসংখ্যা – ২৯২৭৭ জন (প্রায়) (২০১১ আদম শুমারি অনুযায়ী)  \n- সংখ্যা সংখ্যা – ১২টি।  \n- মৌজার সংখ্যা – ৯টি।  \n- হাট/বাজার সংখ্যা – ৬ টি।  \n- উপজেলা সদর থেকে যোগাযোগ মাধ্যম – সিএনজি/রিক্সা।  \n- শিক্ষা হার – ৪৯% (২০০১ এর শিক্ষা জরীপ অনুযায়ী)।  \n\n**শিক্ষা প্রতিষ্ঠান**: সরকার প্রাথমিক- ১৬টি, নিম্ন মাধ্যমিক বিদ্যালয়- ১টি, উচ্চ বিদ্যালয়- ০৩, কলেজ/উচ্চ শিক্ষাঃ ২টি, মাদ্রাসা- ২টি।\n\n**জনবল তালিকা:**\n\n| ক্রমিক | নাম | পদবি | মোবাইল |\n|--------|------------------------|---------------------------|---------------|\n| ১ | মো: নুরুল ইসলাম | ইউপি চেয়ারম্যান | ০১৭১৫৭০৩৯৮২ |\n| ২ | রুবেল মন্ডল | প্রশাসক | ০১৭০৮৪১৫০০০ |\n| ৩ | মোছা: ফাতেমা চৌধুরী | ইউনিয়ন পরিষদের মেম্বার | ০১৭৫২-২৮৩০৩৭ |\n| ৪ | মোছা: মিনানা খাতুন | ইউনিয়ন পরিষদের মেম্বার | ০১৭৬৩-৩৭৪৮৭৮ |\n| ৫ | মোছা: নাজমা খাতুন | ইউনিয়ন পরিষদের মেম্বার | ০১৭৪৯-১১৮৪৯২ |\n| ৬ | মোঃ খলিলুর রহমান | ইউনিয়ন পরিষদের মেম্বার | ০১৯১৭-৯১৯৪৯ৃ |\n| ৭ | মো: আবুল মনসুর | ইউনিয়ন পরিষদের মেম্বার | ০১৭০৮৪৪৬৬২৫ |\n| ৮ | রতন মিয়া | ইউনিয়ন পরিষদের মেম্বার | ০১৭৩৩-১৬৯২৪৮ |\n| ৯ | মো: শহিদুল্লাহ মনসুর | ইউনিয়ন পরিষদের মেম্বার | ০১৭০৮৪৪৬৬২৭ |\n| ১০ | মোঃ স্বপন মিয়া | ইউনিয়ন পরিষদের মেম্বার | ০১৭৬০-১৭৭৩১৯ |\n| ১১ | আব্দুল বাছেদ | ইউনিয়ন পরিষদের মেম্বার | ০১৭১৮-১৬৬৫০১ |\n| ১২ | মোঃ আসাদুজ্জামান | ইউনিয়ন পরিষদের মেম্বার | ০১৭১৮-৫৮২০৯২ |\n| ১৩ | মোঃ আব্দুর রাজ্জাক | ইউনিয়ন পরিষদের মেম্বার | ০১৭৫২-৫৭৯০৮১ |\n| ১৪ | গোলাম মুহাম্মদ কিবরিয়া | ইউনিয়ন পরিষদের মেম্বার | ০১৭১২-৪৬৫৯৯৫ |"
            ),
            UnionData(
                title = "২নং মেদুয়ারী ইউনিয়ন",
                content = "ঢাকা ময়মনসিংহ মহাসড়কের ভরাডোবা টূ ঘাটাইল পাঁকা রাস্তার পাশে ১১টি গ্রামের সমন্বয়ে মেদুয়ারী ইউনিয়ন পরিষদ।\n\n- নাম – ২নং মেদুয়ারী ইউনিয়ন পরিষদ  \n- আয়তন – ৩৪.০৪ বর্গ কি:মি:  \n- লোকসংখ্যা – ৩০১৭০ জন  \n- গ্রামের সংখ্যা – ১১ টি  \n- মৌজার সংখ্যা – ৪টি  \n- হাট/বাজার সংখ্যা – ৩টি (সরকারী)  \n- উপজেলা থেকে যোগাযোগ – সিএনজি, বাস, রিক্সা, ইজি বাইক  \n- শিক্ষার হার : ৩৯.০৩% (২০০১ সালের আদম শুমারী অনুযায়ী)  \n- সরকারী প্রাথমিক বিদ্যালয় – ১৩ টি  \n- বে-সরকারী প্রাথমিক বিদ্যালয় – ৩টি  \n- উচ্চ বিদ্যালয় – ৪টি  \n- মাদ্রাসা – ৩টি  \n\n**গ্রাম সমূহ:** মেদুয়ারী, বান্দিয়া, ছোটলোহাবই, বরাইদ, রামপুর, বনকূয়া, বগাজান, জগৎবের, সোয়াইল, পানিভান্ডা, নিঝুরী।\n\n**সাবেক চেয়ারম্যানগণের তালিকা:**\n\n| ক্রমিক | নাম | মেয়াদ |\n|--------|--------------------------------------|-------------|\n| ০১ | জনাব মোঃ আঃ আজিজ মিয়া | ১৯৭৩-১৯৭৮ |\n| ০২ | জনাব মোঃ আমির উদ্দিন মাস্টার | ১৯৭৮-১৯৮৩ |\n| ০৩ | জনাব মোঃ আব্দুস ছোবান মোল্লা | ১৯৮৩-১৯৮৮ |\n| ০৪ | জনাব মোঃ আব্দুস ছোবান মোল্লা | ১৯৮৮-১৯৯২ |\n| ০৫ | জনাব মোঃ আঃ আজিজ মিয়া | ১৯৯২-১৯৯৭ |\n| * | জনাব মোঃ রোস্তম আলী (ভারপ্রাপ্ত) | ১৯৯৭-১৯৯৮ |\n| ০৬ | জনাব এ.কে.এম সহিদুজ্জামান তালুকদার | ১৯৯৮-২০০৩ |\n| ০৭ | জনাব মোঃ লোকমান হেকিম সরকার | ২০০৩-২০১১ |\n| ০৮ | জনাব আ.ন.ম. নূরুল মাউফ খান মোমেন | ২০১১-২০১৬ |\n| * | জনাব মোঃ মিয়াজ উদ্দিন (প্যানেল চেয়ারন্যান-১) | ২০১৬ |\n| ০৯ | জনাবা মোছাঃ জেসমিন নাহার রানী | ২০১৬-২০২৪ |"
            ),
            UnionData(
                title = "৩নং ভরাডোবা ইউনিয়ন",
                content = "**হাট-বাজার তালিকা:**\n\nহাট – ৪টি:  \n১. ভরাডোবা বাসস্ট্যান্ড হাট  \n২. ভরাডোবা উচ্চবিদ্যালয় হাট  \n৩. পুরুড়া হাট  \n৪. পুরুড়া আফাজউদ্দিনের হাট  \n\nবাজার – ৩টি:  \n১. নিশিন্দা বাজার  \n২. পুরুড়া বাজার  \n৩. রাংচাপড়া বাজার"
            ),
            UnionData(
                title = "৪নং ধীতপুর ইউনিয়ন",
                content = "ত্রিশাল ও গফরগাও উপজেলার শেষ সীমানায় অবস্থিত একটি ঐতিহ্যবাহী ইউনিয়ন।\n\n- নাম – ৪নং ধীতপুর ইউনিয়ন পরিষদ  \n- গ্রাম: বাদে পুরম্নড়া, বহুলি, ধীতপুর, পাঁচগাতিয়া, নয়া বিটা, রান্দিয়া, ধলিয়া, পানিহাদী  \n\n**শিক্ষা:**\n- শিক্ষার হার : ৮৫%  \n- শিক্ষা প্রতিষ্ঠান: ধলিয়া বহুলী হাইস্কুল ও কলেজ, আজিমুন্নেছা উচ্চ বালিকা বিদ্যালয়, ধলিয়া সরকারি প্রাথমিক বিদ্যালয়, গুলেনুর দাখিল মাদ্রাসা, দীপ্তি একাডেমি, রান্দিয়া উচ্চ বিদ্যালয়, টুংরাপাড়া কে জে এম উচ্চ বিদ্যালয়\n\n**জনবল:** ১৩ সদস্য, ১ সচিব, ৯ গ্রাম পুলিশ  \n**উল্লেখযোগ্য ব্যক্তি:** মোস্তাফিজুর রহমান খান – স্বাধীনতা পুরস্কারপ্রাপ্ত চক্ষু বিশেষজ্ঞ"
            ),
            UnionData(
                title = "৫নং বিরুনিয়া ইউনিয়ন",
                content = "- আয়তন: ২৭.২৬ কি: মি:  \n- লোকসংখ্যা: ২১,৮৯৩  \n- গ্রামের সংখ্যা: ৯  \n- মৌজার সংখ্যা: ৯  \n- শিক্ষার হার: ৩৭.৭৪%  \n\n**শিক্ষা প্রতিষ্ঠান:**  \n- স্কুল এন্ড কলেজ: ১  \n- মহিলা কলেজ: ১  \n- মাধ্যমিক বিদ্যালয়: ৫  \n- প্রাথমিক বিদ্যালয়: সরকারী ১২, এফতেদিয়া ২  \n\n**গ্রাম সমূহ:** গোয়ারী, ভাওয়ালিয়া বাজু, বাওয়া, চান্দরাটি, মাহমুদপুর, কংশেরকুল, বিরুনীয়া, বাকসী বাড়ী, কাইচান"
            ),
            UnionData(
                title = "৬নং ভালুকা ইউনিয়ন",
                content = "- লোকসংখ্যা: ২১,২২৩  \n- গ্রামের সংখ্যা: ৯  \n- মৌজা: ৯  \n- হাট/বাজার: ৩ (মেদিলা বাজার, আশকা বাজার, বাশিল বাজার)  \n- শিক্ষার হার: ৪০.৮২%  \n\n**গ্রাম:** ভালুকা, খারুয়ালী, মিরকা, নিশাইঞ্জ, মেদিলা, আশকা, কাঠালী, মেহেরাবাড়ী, বাশিল  \n\n**শিক্ষা তথ্য:** হাই স্কুল ৩, প্রাইমারি স্কুল ৮, মাদ্রাসা ৪, মন্দির ১, মসজিদ ৪০"
            ),
            UnionData(
                title = "৭নং মল্লিকবাড়ী ইউনিয়ন",
                content = "৯টি গ্রাম নিয়ে গঠিত: মল্লিকবাড়ী, ভায়াবহ, বর্তা, নয়নপুর, ধামশুর, ভান্ডাব, সাতেঙ্গা, মামারিশপুর, গোবুদিয়া।\n\n**জনসংখ্যা:** প্রায় ২১ হাজার।"
            ),
            UnionData(
                title = "৮নং ডাকিতয়া ইউনিয়ন",
                content = "- আয়তন: ৬২.০৪ বর্গ কি:মি:  \n- লোকসংখ্যা: ৭৫,৬৫০  \n- গ্রামের সংখ্যা: ১২  \n- মৌজা: ৭  \n- হাট/বাজার: ৫  \n- শিক্ষার হার: ৪৯.০৩%  \n\n**শিক্ষা প্রতিষ্ঠান:** সরকারি প্রাথমিক বিদ্যালয় ২১, বেসরকারি প্রাথমিক ৩, উচ্চ বিদ্যালয় ৩, মাদ্রাসা ৩  \n\n**জনবল:** নির্বাচিত সদস্য ১৩, সচিব ১, উদ্যোক্তা ২, উপ-স্বাস্থ্যকেন্দ্র ১, কমিউনিটি ক্লিনিক ৫, দফাদার ১, গ্রাম পুলিশ ৭"
            ),
            UnionData(
                title = "৯নং কাচিনা ইউনিয়ন",
                content = "- এলাকা: ৫৮৪ একর  \n- জনসংখ্যা: ২৫,৬১২ (২০১১)  \n- গ্রামের সংখ্যা: ৬  \n- মৌজা: ৫  \n- হাট/বাজার: ৬  \n- যোগাযোগ: সিএনজি/রিকশা"
            ),
            UnionData(
                title = "১০নং হবিরবাড়ী ইউনিয়ন",
                content = "**অবস্থান:** ময়মনসিংহ জেলার দক্ষিণ সীমান্তে, গাজীপুর জেলার সীমানা সংলগ্ন। প্রধান বাজার – সিডস্টোর বাজার, মাস্টারবাড়ী বাজার।  \n\n**জনসংখ্যা:** প্রায় ২৩ হাজার।  \n\n**গ্রাম:** পাড়াগাঁও, হবিরবাড়ী, পাখিরচালা, বড়চালা, লবনকোঠা, কাশর, মাস্টারবাড়ী, শিরিরচালা, ঝালপাজা, আমতলী, এতিমখানা।\n\n**শিক্ষা:**\n- শিক্ষার হার: ৮৩%  \n- প্রধান প্রতিষ্ঠান: হবিরবাড়ী ইউনিয়ন সোনার বাংলা স্কুল এন্ড কলেজ, বাহারুল উলুম আলিম মাদরাসা, সমলা তাহের আদর্শ উচ্চ বিদ্যালয়, জামিরদিয়া আব্দুল গণি মাস্টার স্কুল এন্ড কলেজ, বড়চালা হোসাইনিয়া দাখিল মাদরাসা, প্রভৃতি।\n\n**দর্শনীয় স্থান:** হবিরবাড়ী বন, গফুর মৌলভী দরগাহ, গ্ৰীন অরন্য পার্ক, হোটেল তেপান্তর, এনটিভি রিসোর্ট।\n\n**সাবেক চেয়ারম্যান তালিকা:**\n\n| ক্রমিক | নাম | মেয়াদ |\n|--------|----------------------|-------------|\n| ১ | হাজী নিজাম উদ্দিন | ২০০১-২০০৬ |\n| ২ | হাজী নিজাম উদ্দিন | ২০০৬-২০১১ |\n| ৩ | মুহাম্মদ মোরশেদ আলম | ২০১১-২০১৬ |\n| ৪ | মোঃ তোফায়েল আহমেদ | ২০১৬-২০২১ |\n| ৫ | মোঃ তোফায়েল আহমেদ | ২০২২-২০২৪ |"
            ),
            UnionData(
                title = "১১নং রাজৈ ইউনিয়ন",
                content = "খিরু নদীর তীরে অবস্থিত একটি ইউনিয়ন। পূর্বে সদর ছিল রাজৈ বাজারে, বর্তমানে বোর্ড বাজারে।\n\n- ৯টি ওয়ার্ড নিয়ে গঠিত  \n- উত্তরে ও পূর্বে: বিরুনীয়া ইউনিয়ন  \n- পশ্চিমে: ভালুকা ইউনিয়ন  \n- দক্ষিণে: গাজীপুর জেলার কাওরাইদ ইউনিয়ন ও হবিরবাড়ী ইউনিয়ন  \n\n**বিশেষ বৈশিষ্ট্য:**\n- ৩টি নদী ও বহু বিল রয়েছে  \n- প্রচুর মাছ চাষ হয়  \n\n**শিক্ষা প্রতিষ্ঠান:** ৮৩নং কুল্লাব সরকারি প্রাথমিক বিদ্যালয়, জামিরাপাড়া এসএম উচ্চ বিদ্যালয়, রাজৈ উচ্চ বিদ্যালয়, শহিদ সরণি উচ্চ বিদ্যালয়, পনাশাইল উচ্চ বিদ্যালয়, পাইলাব সরকারি প্রাথমিক বিদ্যালয়, উরাহাটি সরকারি প্রাথমিক বিদ্যালয়, চান্দাব নাথপাড়া প্রাথমিক বিদ্যালয়, খূর্দ সরকারি প্রাথমিক বিদ্যালয়, চান্দাব দাখিল মাদ্রাসা, প্রভৃতি।"
            )
        )
    }
}
