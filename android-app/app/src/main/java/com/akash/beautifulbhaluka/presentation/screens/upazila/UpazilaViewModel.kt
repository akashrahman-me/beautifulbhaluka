package com.akash.beautifulbhaluka.presentation.screens.upazila

import androidx.lifecycle.ViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.update
import com.akash.beautifulbhaluka.domain.model.UpazilaInfo
import com.akash.beautifulbhaluka.domain.model.UpazilaSection

class UpazilaViewModel : ViewModel() {

    private val _uiState = MutableStateFlow(UpazilaUiState())
    val uiState: StateFlow<UpazilaUiState> = _uiState.asStateFlow()

    init {
        loadUpazilaData()
    }

    fun onAction(action: UpazilaAction) {
        when (action) {
            is UpazilaAction.LoadData -> loadUpazilaData()
            is UpazilaAction.ToggleSection -> toggleSection(action.index)
        }
    }

    private fun loadUpazilaData() {
        _uiState.update { it.copy(isLoading = true) }

        // For now, we'll use static data as mentioned in the requirement
        val mockData = UpazilaInfo(
            title = "ভালুকা উপজেলার পরিচিতি",
            description = "ভালুকা বাংলাদেশের ময়মনসিংহ জেলার অন্তর্গত একটি উপজেলা। এটি বাংলাদেশের প্রথম মডেল থানা এবং দেশের অন্যতম বিসিক শিল্প নগরী।সাক্ষরতার হার 96% বেকারত্বের হার 4% শিক্ষার হার 72% প্রবাসী রেমিটেন্স 7% এটি সারা বাংলাদেশের সবকয়টা থানাকে পিছনে ফেলে ভালুকা এক নম্বর অবস্থানে এসেছে। ইসলাম 95% হিন্দু 3% খ্রিস্টান 2% এ উপজেলায় ৮৭টি মৌজা ও ১১০টি গ্রাম রয়েছে।",
            imageUrl = "https://via.placeholder.com/400x200/2196F3/FFFFFF?text=ভালুকা+উপজেলা", // Placeholder image
            sections = getSections()
        )

        _uiState.update {
            it.copy(
                isLoading = false,
                upazilaInfo = mockData,
                error = null
            )
        }
    }

    private fun toggleSection(index: Int) {
        _uiState.update { state ->
            val expandedSections = state.expandedSections.toMutableSet()
            if (expandedSections.contains(index)) {
                expandedSections.remove(index)
            } else {
                expandedSections.add(index)
            }
            state.copy(expandedSections = expandedSections)
        }
    }

    private fun getSections(): List<UpazilaSection> {
        return listOf(
            UpazilaSection(
                title = "অবস্থান, যোগাযোগ ও প্রশাসনিক এলাকা",
                content = "## অবস্থান\nভালুকাকে ময়মনসিংহের দরজা বলা হয়। ঢাকা থেকে ঢাকা-ময়মনসিংহ জাতীয় চারলেন মহাসড়ক পথে রাজেন্দ্রপুর সেনানিবাস (গাজীপুর) ও মাওনা চৌরাস্তা(শ্রীপুর) হয়ে (প্রায় ৭০কিঃমিঃ) পর ভালুকা উপজেলা। উত্তরে ত্রিশাল উপজেলা, দক্ষিণে গাজীপুর জেলার শ্রীপুর উপজেলা, পূর্বে গফরগাঁও উপজেলা, পশ্চিমে ফুলবাড়ীয়া উপজেলা ও টাঙ্গাইল জেলার সখিপুর উপজেলা ও ঘাটাইল উপজেলা।\n\n## যোগাযোগ\nঢাকা থেকে ৭০ কি মি দূরত্বে অবস্থিত শিল্পনগরী ভালুকা। চার লেন ঢাকা-ময়মনসিংহ মহাসড়ক দ্বারা খুব সহজেই ভালুকায় পৌছানো যায়।\n\n## প্রশাসনিক এলাকা\nভালুকা উপজেলা ১৯৮৩ সালে প্রতিষ্ঠিত হয়। ভালুকা উপজেলার আয়তন ৪৪৪.০৫ বর্গ কিলোমিটার। এ উপজেলায় বর্তমানে ১টি পৌরসভা ও ১১টি ইউনিয়ন রয়েছে। সম্পূর্ণ উপজেলার প্রশাসনিক কার্যক্রম ভালুকা থানার আওতাধীন।\n\n- পৌরসভা: ভালুকা\n- ইউনিয়নসমূহ: ১নং উথুরা, ২নং মেদুয়ারী, ৩নং ভরাডোবা, ৪নং ধীতপুর, ৫নং বিরুনিয়া, ৬নং ভালুকা, ৭নং মল্লিকবাড়ী, ৮নং ডাকাতিয়া, ৯নং কাচিনা, ১০নং হবিরবাড়ী, ১১নং রাজ।"
            ),
            UpazilaSection(
                title = "ভালুকা নামকরণের ইতিহাস",
                content = "মূলত ভালুকা গ্রাম ও ভালুকা বাজারকে কেন্দ্র করেই ভালুকা থানা ও ভালুকা উপজেলার নামকরণ করা হয়েছে। ভালুকা নামকরণ বিষয়ে বেশ কয়েকটি জনশ্রুতি প্রচলিত রয়েছে। এই জনশ্রুতিগুলোর মধ্যে তিনটি জনশ্রুতিই সবচেয়ে বেশি উল্লেখযোগ্য।\n\n### প্রথম জনশ্রুতি\nব্রিটিশ শাসন যখন বাংলাদেশে পাকাপোক্তভাবে প্রতিষ্ঠিত হয়, তখন নীলকর সাহেবগণ তাঁদের নিজস্বার্থ চরিতার্থ করার জন্যে বিভিন্ন জায়গায় নীলকুঠি স্থাপন করেন। নীলকুঠি স্থাপনের পর নীলকর সাহেবগণ মাঝে মধ্যে শিকার করতে বের হতেন। শিকার করতে বের হয়ে নীলকর সাহেবগণ বনে-জঙ্গলে বাঘ, ভাল্লুক দেখতে পেতেন। আর এ কারণেই নীলকর সাহেবদের কাছে এই এলাকা ভাল্লুক এলাকা হিসেবে পরিচিতি পেয়ে যায়। পরবর্তী সময়ে ভাল্লুক এর অপভ্রংশ হিসেবে উৎপত্তি ঘটে ভালুকা নামের।\n\n### দ্বিতীয় জনশ্রুতি\nবর্তমান ভালুকা বাজারের দু'টি অংশ রয়েছে। এর একটি হচ্ছে পূর্ব অংশ, অন্যটি হচ্ছে পশ্চিমাংশ। পূর্ববাজারসহ গোটা ভালুকাই ছিলো ভাওয়াল পরগণার অন্তর্ভুক্ত। অবশ্য ভালুকার পশ্চিম বাজার ছিলো মুক্তাগাছার জমিদার মহারাজ শশীকান্তের জমিদারির আওতাভূক্ত। সেখানে জঙ্গলের ভেতর একটি মাজার ছিলো। এর খাদেম ছিলেন ওয়াহেদ আলী ফকির ও তৈয়বজান বিবির পিতা বুচাই ফকির। মরহুম খান সাহেব আবদুল্লাহ চৌধুরীর নির্দেশে তাঁর সমসাময়িক বেশ ক'জন বিশ্বস্ত লোক মনসুর আলী খান, জয়েদ আলী ও জয়েদ খানের সহযোগিতায় ভালুকা বাজার সৃষ্টি হয়। পূর্ব বাজারে একটি কাঁচারী ঘর ছিলো। সেখানে ভাওয়াল রাজার নামে খাজনা আদায় করা হতো। ভাওয়ালের কাঁচারীর নাম হয়ে ছিলো ভাওয়ালের নাম অনুসারেই। পরবর্তী সময় বাজারসহ গ্রামের নামকরণ হয় ভালুকা।\n\n### তৃতীয় জনশ্রুতি\nভালুক চাঁদ মন্ডল ছিলেন আদিবাসী কোচ বংশের সর্দার। ভালুক চাঁদ এর নামানুসারে ভালুকা নামের সৃষ্টি হয়েছে। উথুরা ইউনিয়নে ও বর্তমান ডাকাতিয়া অঞ্চলে কোচ বংশের লোকজনের অধিবাস এখনো রয়েছে। উল্লেখ করা যেতে পারে যে, বর্তমানে কোচ বংশের লোকজন বর্মণ পদবী ধারণ করেছে।"
            ),
            UpazilaSection(
                title = "মুক্তিযুদ্ধে অবদান",
                content = "মুক্তিযুদ্ধের সময় ১১ নাম্বার সেক্টরের অধীনে থাকা ভালুকা পাকিস্তানি দখল মুক্ত হয় ৮ ডিসেম্বর। ভালুকার মুক্তিযুদ্ধের ইতিহাসে যার ভূমিকা অন্যতম তিনি হলেন বীর মুক্তিযুদ্ধা মেজর আফসার উদ্দিন। তার পরিচালিত বাহিনীকে আফসার বাহিনী বলা হত। মেজর আফসারের বাহিনীতে সেনাবাহিনীর নিয়মানুযায়ী ৫টি ব্যাটেলিয়নে ২৫টি কোম্পানি গঠন করা হয়। প্রত্যেক কোম্পানিতে ৩টি প্লাটুন, প্রত্যেক প্লাটুনে ৩টি সেকশন এবং প্রত্যেক সেকশনে ১৫ জন করে মুক্তিযুদ্ধা ছিল।\n\nতৎকালীন রাজশাহী ইঞ্জিনিয়ারিং কলেজের ছাত্র সংসদের সহসভাপতি ছিলেন ভালুকার মোঃ আব্দুল মান্নান যিনি প্রথম ৩টি ৩০৩ রাইফেল জোগাড় করে মেজর আফসার উদ্দিনকে ট্রেনিং শুরু করতে অনুরোধ করেন এবং নিজেও সেই বাহিনীতে যোগ দেন।\n\nএই বাহিনীর উল্লেখযোগ্য যুদ্ধের মধ্যে অন্যতম হলো:\n- বাটাজোর (১৪ আগস্ট)\n- কাচিনা\n- ডাকাতিয়া\n- পাঁচগাঁও\n- কাতলামারি\n- রাজৈ\n- ফুলবাড়িয়া\n- কালিয়াকৈর\n\nতার মধ্যে অন্যতম হল ভাওয়ালিয়াবাজু যুদ্ধ। মেজর আফসার উদ্দিনের নেতৃত্বে ২৬ জুন ভালুকা থানায় এ যুদ্ধ সংগঠিত হয়। ৪৮ ঘণ্টা স্থায়ী ভাওয়ালিয়াবাজু যুদ্ধে ৫০ জন পাকসেনা খতম হয়। শহীদ হন আরেক বীর মুক্তিযুদ্ধা আবদুল মান্নান।"
            ),
            UpazilaSection(
                title = "জনসংখ্যার উপাত্ত",
                content = "- মোট জনসংখ্যা: ৩০৮,৭৫৮ জন (২০১১ সনের আদমশুমারী অনুযায়ী)\n- পুরুষ: ১৫৮,০০৩ জন\n- মহিলা: ১৫০,৭৫৫ জন\n- মুসলিম: ৯৪%\n- হিন্দু: ৫%\n- অন্যান্য: ১%\n\nজনসংখ্যার প্রতি বর্গ কিলোমিটারে ৬৯৫ জন, মোট খানার সংখ্যা ৭২,০৬৯টি, বার্ষিক জনসংখ্যা বৃদ্ধির হার ১.৫৪%।\n\nবর্তমানে (২০১৯) স্থানীয় ধারণা অনুযায়ী ভালুকায় বিশাল বহিরাগত জনসংখ্যাসহ ১৫ লক্ষাধিক মানুষ বসবাস করছে, এবং এ থেকে বর্তমান ২০১৯ এ ভালুকার জনসংখ্যার বিশালতা ধারণা করা যায়।"
            ),
            UpazilaSection(
                title = "শিক্ষা",
                content = "- সাক্ষরতার হার: ৪৯.৮%\n- মোট সাক্ষর জ্ঞান সম্পন্ন জনগণ: ১৭৯,৮৬১\n\n### প্রাথমিক বিদ্যালয়\n- মোট: ২১৭টি (সরকারি ৯৪, বেসরকারি রেজিস্টার্ড ৩৫, আন রেজিস্টার্ড ১, উচ্চ বিদ্যালয় সংলগ্ন ৮, কিন্ডার গার্ডেন ৬, স্বতন্ত্র এবতেদায়ী মাদ্রাসা ১১, উচ্চ মাদ্রাসা সংলগ্ন ৩৭, কমিউনিটি ২৫)\n\n### মাধ্যমিক স্তর\n- নিম্ন মাধ্যমিক বিদ্যালয়: ১১টি\n- ৯ম শ্রেণীর অনুমতি প্রাপ্ত বিদ্যালয়: ৭টি\n- মাধ্যমিক বিদ্যালয়: ৩৩টি\n- স্কুল এন্ড কলেজ: ৩টি\n- উচ্চ মাধ্যমিক বিদ্যালয়: ১টি\n- ডিগ্রী কলেজ: ২টি (সরকারী)\n- ফাযিল মাদ্রাসা: ৩টি\n- আলিম মাদ্রাসা: ২টি\n- দাখিল মাদ্রাসা: ৩৬টি"
            ),
            UpazilaSection(
                title = "অর্থনীতি",
                content = "প্রধান খাত: **শিল্প**। বৈদেশিক মুদ্রা অর্জনে দেশীয় অর্থনীতিতে বড় ভূমিকা রেখেছে। এছাড়া **কৃষি** ও **মৎস্য খাত**ও ‌অর্থনীতিতে প্রভাব বিস্তার করে।"
            ),
            UpazilaSection(
                title = "নির্বাচন সংক্রান্ত",
                content = "- নির্বাচনী এলাকা: ১৫৬-ময়মনসিংহ ১১\n- ভোটার সংখ্যা: পুরুষ ১১৪,৪২২ জন, মহিলা ১১৯,৩৯৭ জন, মোট ২৩৩,৮১৯ জন\n- বর্তমান সংসদ সদস্য: নেই (সদ্য সাবেক সংসদ সদস্য এম এ ওয়াহেদ)"
            ),
            UpazilaSection(
                title = "বিবিধ শিল্পাঞ্চল ও শিল্প",
                content = "অসংখ্য টেক্সটাইল মিলস, ঔষধ কারখানা, কুমির খামার, সিরামিক শিল্প, স্পিনিং মিলস, কোমল পানীয় কারখানা, স্যালাইন কারখানা, ফিস ফিড, চালের মিল, মোটরযান কারখানা, গ্লাস কারখানা এবং দক্ষিণ ভালুকায় রয়েছে ভারী শিল্প ও আন্তর্জাতিক মানের পোশাক শিল্পাঞ্চল।"
            ),
            UpazilaSection(
                title = "ভালুকার নদীসমূহ",
                content = "## নদী\nভালুকা উপজেলায় অনেকগুলো নদী আছে। সেগুলো হচ্ছে: খিরু নদী, সুতিয়া নদী, কাওরাইদ নদী, বাজুয়া নদী, লাউতি নদী, বিলাই জুড়ি ও মিয়াবুয়া নদী।\n\n## খিরু নদী ও ভালুকা\nশীতলক্ষার একটি শাখা নদী খিরু নদী। ভালুকা বাজারের পাশ দিয়ে বয়ে গেছে নদীটি। নদীটির দুই পাড়ের নৈসর্গিক দৃশ্য অনেক নয়নাভিরাম সৌন্দর্য দেখে মনপ্রাণ মুগ্ধ হয়ে যায়। এককালে ভাটি অঞ্চলের মানুষ বিশেষকরে বরমীবাজার, কাওরাইদ বাজার, পারুলদিয়া বাজার, ঝালপাজা বাজার, পনাশাইল বাজার, মল্লিকবাড়ী বাজার অনবরত যাতায়াত ছিল এই নদী পথে।\n\nসময়ের ব্যবধানে সেই জনপদগুলো আজ বিলুপ্তির দিকে। এই নদীর মাছ অনেক নদীর তুলনায় খেতে খুব সুস্বাদু ছিল। সারি সারি পালের নৌকায় মাঝির কন্ঠে ভাটিয়ালি শোনা যেত। নৌকা বাইচ ছিল খুব এই নদীতে জনপ্রিয়। প্রতি বর্ষায় আসর বসত উত্তেজনাপূর্ণ নৌকা বাইচের। বিভিন্ন জেলার বণিকদের যাতায়াতের পথ ছিল এই নদী।"
            ),
            UpazilaSection(
                title = "প্রকৃতিক সম্পদ",
                content = "কাদিগড় জাতীয় উদ্যান এই উপজেলায় অবস্থিত একটি জাতীয় উদ্যান। ২০১০ সালের ২৪ অক্টোবর এটি প্রতিষ্ঠিত হয়। ৩৪৤.১৩ হেক্টর জমি নিয়ে এই জাতীয় উদ্যানটি গঠিত। এছাড়া মোট বনভূমি ২৩,০৭৮.২৬ একর। বালু মহল আছে।"
            ),
            UpazilaSection(
                title = "কৃষি",
                content = "- মোট জমি: ৪৪,৪০৫ হেক্টর\n- এক ফসলী জমি: ৫,২২৩ হেক্টর\n- দুই ফসলী জমি: ১৯,৫৩৮ হেক্টর\n- তিন ফসলী জমি: ১৬,৮৯৭ হেক্টর\n- নীট ফসলী জমি: ৪১,৬৫৮ হেক্টর\n- মোট ফসলী জমি: ৯৪,৯৯০ হেক্টর\n- ফসলের নিবিড়তা: ২২৮%\n\n### কৃষক শ্রেণি\n- বর্গাচাষী: ৮,০০০ জন\n- প্রান্তিক চাষী: ২৪,০১১ জন\n- ক্ষুদ্র চাষী: ৯,০০০ জন\n- মাঝারি চাষী: ৮,৩২৮ জন\n- বড় চাষী: ২,০০০ জন\n\n### কৃষি অবকাঠামো\n- কৃষি ব্লকের সংখ্যা: ৩১টি\n- কৃষি বিষয়ক পরামর্শ কেন্দ্র: ৩১টি\n- সয়েল মিনিল্যাব: ৫টি\n- বিএডিসি বীজ ডিলার: ১৯ জন\n- বিসিআইসি সার ডিলার: ১০ জন"
            ),
            UpazilaSection(
                title = "স্বাস্থ্য কেন্দ্র",
                content = "- উপজেলা স্বাস্থ্য কমপ্লেক্স: ১টি (৫০ শয্যাবিশিষ্ট)\n- পরিবার কল্যাণ কেন্দ্র: ৭টি\n- উপস্বাস্থ্য কেন্দ্র: ৩টি\n- কমিউনিটি ক্লিনিক: ২৬টি\n- সরকারি অ্যাম্বুলেন্স: ১টি\n- হবিরবাড়ী ইউনিয়ন পরিষদ চেয়ারম্যান দান করেছে: ১টি অ্যাম্বুলেন্স"
            ),
            UpazilaSection(
                title = "রপ্তানিতে অবদান",
                content = "বিসিক শিল্পাঞ্চল ভালুকায় অবস্থিত অসংখ্য গার্মেন্টস টেক্সটাইল ও বিভিন্ন শিল্পকারখানা থেকে তৈরি পোশাকসহ অসংখ্য পণ্য নিয়মিত বিদেশে রপ্তানি হচ্ছে, যা দেশের শিল্প খাতে ব্যাপক ভুমিকা রাখছে। দেশের বিভিন্ন জেলার লাখ লাখ জনগণের কর্মসংস্থান দিচ্ছে গার্মেন্টস ও টেক্সটাইল ফ্যাক্টরিগুলো।\n\nবাণিজ্যিকভাবে মাছ উৎপাদনে ভালুকার ব্যাপক সুনাম রয়েছে। পেশা হিসেবে অসংখ্য উদ্যোক্তা মাছ চাষকে বেছে নিয়েছেন। অধিকাংশ জলাশয়েই বাণিজ্যিকভাবে মাছ চাষ হচ্ছে। রুই, কাতলা, পাঙাশ, তেলাপিয়া, কই, মাগুর ও শিং জাতের মাছ চাষ হচ্ছে বাণিজ্যিক ভিত্তিতে। ২০১৭-১৮ অর্থবছরে সারা দেশে মাছ উৎপাদিত হয়েছে ৪২ লাখ মেট্রিক টন এবং ময়মনসিংহ জেলায় মাছ উৎপাদন হয়েছে ৪ লাখ ৪৮ হাজার ৮৮২ মেট্রিক টন। সে মতে সারাদেশের মোট উৎপাদিত মাছের প্রায় ১০ ভাগ উৎপাদিত হয় ময়মনসিংহে, যা অর্জনে সবচেয়ে বেশি অবদান ভালুকার।\n\nভালুকার হাতিবেড় গ্রামে দক্ষিণ এশিয়ার প্রথম কুমির প্রজনন খামার রেপটাইলস। ২০০৪ সালে মাত্র ৭৫টি কুমির দিয়ে খামারের যাত্রা শুরু, পরে কুমিরের ডিম থেকে কৃত্রিমভাবে বাচ্চা ফোটানো হয়। বর্তমানে এ খামারে কুমিরের সংখ্যা আড়াই হাজারের অধিক। জাপান (২০১৪, ১৫ ও ১৬ সালে) ও জার্মানিতে (২০১০ সালে) মোট চারবার জ্যান্ত কুমির এবং চামড়া রপ্তানি করেছে। বাংলাদেশ থেকে প্রথমবার এই ফার্ম থেকেই কুমিরের মাংস, চামড়া, দাঁত ও হাড় রপ্তানি করে প্রায় পাঁচ কোটি টাকা আয় হয়েছে। বর্তমানে প্রতি বছর প্রচুর কুমির রপ্তানি হচ্ছে।\n\nকৃষির আধুনিকায়নের ছোয়ায় প্রচলিত চাষাবাদের সাথেও ভালুকার গ্রামাঞ্চলে অনেক উদ্যোক্তা নতুন ধারায় চাষাবাদ করছেন। বাণিজ্যিকভাবে খামার, ফলের বাগান, ফুলের বাগানে শিক্ষিত উদ্যোক্তাদের পদচারণা।"
            ),
            UpazilaSection(
                title = "বিনোদন ও খেলাধুলা",
                content = "## বিনোদন\nভালুকায় রয়েছে কাদিগড় জাতীয় উদ্যান, তেপান্তর সুটিং স্পট, ড্রীম ওয়াল্ড পার্ক & রিসোর্ট, গ্রীণ অরণ্য পার্ক, কুমির খামার, মোতালেবের সৌদিয়া খেজুর বাগান।\n\n## খেলাধুলা\nক্রিকেট, ফুটবল, কাবাডি, এক্কাদোক্কা, দাড়িয়াবান্ধা, গোল্লাছুট, কানামাছি, বউচি, দাবা ইত্যাদি।\n\n## সংস্কৃতি\n- মৈমনসিংহ গীতিকা\n- ফকিরি গান (জনপ্রিয়)\n- বাউল গান\n- যাত্রা"
            )
        )
    }
}
